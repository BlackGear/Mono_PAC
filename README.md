# Mono PAC

A PAC(Proxy auto-config) file generator with fetched China IP range, which helps walk around GFW.

Mono generates a much smaller PAC file than any other project does.

## Installation
<pre>
$ git clone https://github.com/BlackGear/Mono_PAC.git
</pre>

## Uasge
Edit config file in ./src, then:
<pre>
$ python ./src/make.py
</pre>
Both Python 2 and 3 are supported.

## Configuration
- WhiteList / BlackList:

One domains per line, # for comments. Domains will be automatic merged when generating. So you can just add domains to the list.

- ipList:

One record per line with IP/CIDR format.

Records MUST be manually sort and unique before using.

- proxyList:

Proxy config infomations in order.
<pre>
PROXY host:port   = use HTTP proxy
SOCKS5 host:port  = use Socks5 proxy
DIRECT            = Do not use proxy
</pre>

Note: Safari do not understand "SOCKS5", use "SOCKS" instead, you can also use a more compatible form like:
<pre>
SOCKS5 xxxx:xxxx
SOCKS xxxx:xxxx
DIRECT
</pre>


## Performance
Performance with Node.js:
<pre>
./performance_test.sh
Testing pac generated by BlackGear/Mono_Pac
avg: 2.268us

Testing pac generated by breakwa11/gfw_whitelist
avg: 4.331us

Testing pac generated by Leask/flora_pac
avg: 145.960us

Testing pac generated by Leask/flora_pac-mod
avg: 4.781us

Testing pac generated by usufu/flora_pac
avg: 2.939us

-rw-r--r--  1 Daniel  staff   45662  2 24 21:53 BlackGear-Mono_Pac.pac
-rw-r--r--  1 Daniel  staff  165129  2 24 21:53 Leask-Flora_Pac-mod.pac
-rw-r--r--  1 Daniel  staff   74738  2 24 21:53 Leask-Flora_Pac.pac
-rw-r--r--  1 Daniel  staff   92854  2 24 21:53 breakwa11-gfw_whitelist.pac
-rw-r--r--  1 Daniel  staff  254539  2 24 21:53 usufu-Flora_Pac.pac
</pre>

Performance with Safari:
<pre>
Testing pac generated by BlackGear/Mono_Pac
Average 192.78ms in 100,000 tests

Testing pac generated by breakwa11/gfw_whitelist
Average 463.54ms in 100,000 tests

Testing pac generated by Leask/flora_pac
Average 4934.83ms in 100,000 tests

Testing pac generated by Leask/flora_pac-mod
Average 400.81ms in 100,000 tests

Testing pac generated by usufu/flora_pac
Average 281.89ms in 100,000 tests
</pre>

Notes:

All Pac files except Leask-Flora_Pac.pac use a full ipList.

Leask-Flora_Pac.pac use a minimal ipList ignored the last two bytes of every ip.

All Pac files except breakwa11-gfw_whitelist.pac use O(1) algorithm to check the domains white or black list.

breakwa11-gfw_whitelist.pac does not check domains white or black list

** Mono generates the smallest PAC but provides the best performance.**

## To do
- Unique, merge, sort ipList before generate.
